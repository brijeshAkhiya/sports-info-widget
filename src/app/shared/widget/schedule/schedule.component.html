<div class="schedule-list schedule-tour-list" *ngIf="sport != 'soccer'; else soccer_list">
  <div class="schedule-month d-flex" *ngFor="let item of data">
    <div class="month-title">
      <div class="sticky-month">
        <h5>{{item.key}}</h5>
      </div>
    </div>
    <div class="schedule-items">
      <ng-container *ngFor="let match of item.data">
        <ng-container *ngIf="sport == 'cricket'">
          <ng-container *ngTemplateOutlet="cricket;context:{match: match, type:type}">
          </ng-container>
        </ng-container>
        <ng-container *ngIf="sport == 'kabaddi'">
          <ng-container *ngTemplateOutlet="kabaddi;context:{match: match, type:type}">
          </ng-container>
        </ng-container>
      </ng-container>
    </div>
  </div>
</div>

<ng-template #cricket let-match="match">

  <div class="schedule-item d-flex align-items-center rounded-box common-shadow fullblock-link-container"
    [ngClass]="{'complete-match' : match?.match_result}">
    <div class="match-desc">
      <h6>{{match.tournament_name ? match.tournament_name : ''}} <span
          class="text-capitalize">{{ match.tournament_round ? ((match.tournament_name) ? ' - '+match.tournament_round : match.tournament_round) : '' }}</span>
      </h6>
      <p class="stadium-nm" *ngIf="match.venue_name">{{match.venue_name}}, {{match.city_name}}</p>
      <p class="time-line" *ngIf="type == 'fixture'">{{match.scheduled | date:'h:mm a'}}</p>
      <p class="result-line" *ngIf="type == 'result'">
        {{(match?.match_result) ? match?.match_result : 'Match is '+ match.match_status }}
      </p>
    </div>
    <div class="match-teams d-flex align-items-center" *ngIf="match.competitors">
      <div class="match-team d-flex align-items-center">
        <div class="team-info">
          <h5 [ngClass]="{'winner': match?.winner_id == match?.competitors[0]?.id}">
            {{match?.competitors[0]?.abbreviation}}</h5>
          <p *ngIf="match.match_result">
            <ng-container *ngFor="let score of match?.competitors[0]?.p_new; let i = index">
              {{score?.display_score | cricketScore}}
              {{i == match?.competitors[0]?.p_new.length - 1 ?  ("(" + score?.display_overs + " ov)")   : '&'}}
            </ng-container>
          </p>
        </div>
        <div class="team-flag">
          <img [offset]="commonService.lazyloadoffset" [lazyLoad]="match?.competitors[0]?.id | logosurl"
            [defaultImage]="cricketService.flagplaceholder" alt="team-flag">
        </div>
      </div>

      <div class="vs-block">
        <h6>vs</h6>
      </div>

      <div class="match-team d-flex align-items-center">
        <div class="team-flag">
          <img [offset]="commonService.lazyloadoffset" [lazyLoad]="match?.competitors[1]?.id | logosurl"
            [defaultImage]="cricketService.flagplaceholder" alt="team-flag">
        </div>
        <div class="team-info">
          <h5 [ngClass]="{'winner':  match?.winner_id == match?.competitors[1]?.id}">
            {{match?.competitors[1]?.abbreviation}}</h5>
          <p *ngIf="match.match_result">
            <ng-container *ngFor="let score of match?.competitors[1]?.p_new; let i = index">
              {{score?.display_score | cricketScore}}
              {{i == match?.competitors[1]?.p_new.length - 1 ?  ("(" + score?.display_overs + " ov)")   : '&'}}
            </ng-container>
          </p>
        </div>
      </div>
    </div>
    <a class="details-btn"
      [routerLink]="['/cricket/match', (match.id | splitID), (match.competitors[0].abbreviation + '-' +match.competitors[1].abbreviation)]"><span>{{ 'widgetModule.details' | translate }}</span></a>
    <a class="fullblock-link"
      [routerLink]="['/cricket/match', (match.id | splitID),  (match.competitors[0].abbreviation + '-' +match.competitors[1].abbreviation)]">
    </a>
  </div>

</ng-template>

<ng-template #kabaddi let-match="match" let-type="type">
  <div class="schedule-item goal-item d-flex align-items-center rounded-box common-shadow fullblock-link-container"
    [ngClass]="{'complete-match' : match?.match_result}">
    <div class="match-desc">
      <h6>
        <!-- {{match.tournament_name ? match.tournament_name : ''}}  -->
        <span class="text-capitalize">{{ match.round ? match.round : '' }}
          {{ (match?.subtitle ) ? ' - ' + match?.subtitle : ''}}</span>
      </h6>
      <p class="stadium-nm" *ngIf="match.venue && match.venue.name">{{match.venue.name}}</p>

      <p class="time-line" *ngIf="type == 'fixture'">{{ (match.timestampstart | amFromUnix) | amDateFormat:'hh:mm A' }}
      </p>
      <p class="result-line" *ngIf="type == 'result'">{{(match?.result) ? match?.result.text : '' }}</p>
    </div>
    <div class="match-teams d-flex align-items-center">
      <div class="match-team d-flex align-items-center">
        <div class="team-info">
          <h5>
            {{match?.teams?.home?.shortname}}</h5>
        </div>
        <div class="team-flag">
          <img [offset]="commonService.lazyloadoffset" [lazyLoad]="match?.teams?.home?.tid | logosurl:'kabaddi'"
            [defaultImage]="cricketService.flagplaceholder" alt="{{match?.teams?.home?.tname}}" />
        </div>
      </div>

      <!-- For Upcoming Match -->
      <div class="vs-block" *ngIf="match?.status == 1">
        <h6>vs</h6>
      </div>
      <!-- For Complete/Result Match -->
      <div class="score-center-block" *ngIf="match?.status == 2">
        <p>ft</p>
        <div class="value d-flex justify-content-between">
          <h4 class="dark-text" *ngIf="match?.result?.home"
            [ngClass]="{'looser': match?.result?.winner != match?.teams?.home?.tid &&  match?.result?.tie != 'true'}">
            {{match?.result?.home}}</h4>
          <h4 class="dark-text">-</h4>
          <h4 class="dark-text" *ngIf="match?.result?.away"
            [ngClass]="{'looser': match?.result?.winner != match?.teams?.away?.tid  && match?.result?.tie != 'true'}">
            {{match?.result?.away}}</h4>
        </div>
      </div>

      <div class="match-team d-flex align-items-center">
        <div class="team-flag">
          <img [offset]="commonService.lazyloadoffset" [lazyLoad]="match?.teams?.away?.tid | logosurl:'kabaddi'"
            [defaultImage]="cricketService.flagplaceholder" alt="{{match?.teams?.away?.tname}}" />
        </div>
        <div class="team-info">
          <h5>
            {{match?.teams?.away?.shortname}}</h5>

        </div>
      </div>
      <a class="details-btn"
        [routerLink]="['/kabaddi/match', match.mid, (match.shorttitle | slugify)]"><span>{{ 'widgetModule.details' | translate }}</span></a>
      <a class="fullblock-link" [routerLink]="['/kabaddi/match', match.mid, (match.shorttitle | slugify)]">
      </a>
    </div>
    <!-- <a class="details-btn" [routerLink]=""><span>Details</span></a> -->
    <!-- <a class="fullblock-link"
        [routerLink]="">
      </a> -->
  </div>

</ng-template>

<ng-template #soccer_list>
  <div class="soccer-tour-list">
    <div class="soccer-tour rounded-box common-shadow" *ngFor="let item of data">
      <div class="soccer-tour-title">
        <p>{{item.data.season.name}}</p>
      </div>
      <div class="schedule-tour-list">
        <div class="schedule-item goal-item  soccer-item d-flex align-items-center fullblock-link-container"
          *ngFor="let match of item.data.matches" [ngClass]="{'complete-match' : match?.sport_event_status.status=='closed'}">

          <div class="match-teams d-flex align-items-center">
            <div class="match-team d-flex align-items-center">
              <div class="team-info" >
                <h5 [ngClass]="{'winner': match?.sport_event_status.winner_id == match.sport_event.competitors[0]?.id}">{{match.sport_event.competitors[0].abbreviation}}</h5>
              </div>
              <div class="team-flag">
                <img [offset]="commonService.lazyloadoffset" [lazyLoad]=""
                  [defaultImage]="cricketService.flagplaceholder" alt="{{match.sport_event.competitors[0].abbreviation}}">
              </div>
            </div>

            <!-- For Upcoming Match -->
            <div class="vs-block" *ngIf="match.sport_event_status.match_status != 'ended'">
              <h6>vs</h6>
            </div>
            <!-- For Complete/Result Match -->
            <div class="score-center-block" *ngIf="match.sport_event_status.match_status == 'ended'">
              <p>ft</p>
              <div class="value d-flex justify-content-between">
                <h4 class="dark-text">{{match.sport_event.competitors[0].qualifier == 'home' ? match.sport_event_status.home_score : match.sport_event_status.away_score}}</h4>
                <h4 class="dark-text">-</h4>
                <h4 class="dark-text">{{match.sport_event.competitors[1].qualifier == 'home' ? match.sport_event_status.home_score : match.sport_event_status.away_score}}</h4>
              </div>
            </div>

            <div class="match-team d-flex align-items-center">
              <div class="team-flag">
                <img [offset]="commonService.lazyloadoffset" [lazyLoad]=""
                  [defaultImage]="cricketService.flagplaceholder" alt="{{match.sport_event.competitors[1].abbreviation}}">
              </div>
              <div class="team-info">
                <h5 [ngClass]="{'winner': match?.sport_event_status.winner_id == match.sport_event.competitors[1]?.id}">{{match.sport_event.competitors[1].abbreviation}}</h5>
              </div>
            </div>
            <a class="details-btn"><span>Details</span></a>
            <a class="fullblock-link">
            </a>
          </div>
          <div class="match-desc text-center">
            <h6>
              <span class="text-capitalize">{{match.sport_event.start_time | date:'h:mm a'}}</span>
            </h6>
            <p class="stadium-nm" *ngIf="match.sport_event.venue">
              {{match.sport_event.venue?.name}}, {{match.sport_event.venue?.city_name}},
              {{match.sport_event.venue?.country_name}}
            </p>
            <!-- <p class="time-line" *ngIf="type == 'fixture'">{{ (match.timestampstart | amFromUnix) | amDateFormat:'hh:mm A' }}</p>
            <p class="result-line" *ngIf="type == 'result'">{{(match?.result) ? match?.result.text : '' }}</p> -->
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>